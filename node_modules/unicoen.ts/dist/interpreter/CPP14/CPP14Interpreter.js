"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CPP14Interpreter = void 0;
const Interpreter_1 = require("../Interpreter");
const CPP14Engine_1 = require("./CPP14Engine");
const CPP14Mapper_1 = require("./CPP14Mapper");
class CPP14Interpreter extends Interpreter_1.Interpreter {
    constructor() {
        super(new CPP14Engine_1.CPP14Engine(), new CPP14Mapper_1.CPP14Mapper());
    }
    preProcess(text) {
        const replaceMap = new Map();
        for (let pos = text.indexOf('#define'); 0 <= pos; pos = text.indexOf('#define', pos)) {
            const lineEnd = text.indexOf('\n', pos);
            const defineText = text.substring(pos, lineEnd);
            const defineTokens = defineText.split(/\s+/);
            if (defineTokens.length < 3) {
                continue;
            }
            replaceMap.set(defineTokens[1], defineTokens.slice(2).join(' '));
            pos = lineEnd;
        }
        for (const [key, value] of replaceMap) {
            text = text.split(key).join(value);
        }
        return text;
    }
}
exports.CPP14Interpreter = CPP14Interpreter;
//# sourceMappingURL=CPP14Interpreter.js.map